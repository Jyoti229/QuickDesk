{% extends 'base.html' %}

{% block content %}
<h2>Ticket #{{ ticket.id }} - {{ ticket.subject }}</h2>
<p><strong>Status:</strong> {{ ticket.status }}</p>
<p><strong>Description:</strong> {{ ticket.description }}</p>
<p><strong>Category:</strong> {{ ticket.category }}</p>
<p><strong>Last Updated:</strong> {{ ticket.updated_at|date:"M d, Y H:i" }}</p>

<hr>

<h3>Comments</h3>
<ul>
    {% for comment in ticket.comments.all %}
        <li><strong>{{ comment.author.username }}:</strong> {{ comment.content }} 
        <em>({{ comment.created_at|date:"M d, Y H:i" }})</em></li>
    {% empty %}
        <li>No comments yet.</li>
    {% endfor %}
</ul>

<hr>

<h3>Add a Comment</h3>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Submit Comment</button>
</form>

{% endblock %}
